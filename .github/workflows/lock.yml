name: lock
on:
  workflow_dispatch:
permissions:
  contents: write
  
jobs:
  lock:
    runs-on: ubuntu-latest
    steps:
    - name: deploy-lock
      uses: github/lock@v2.0.1
      id: lock
      with:
        mode: "lock"
        timeout-minutes: 10
    - name: unlock
      uses: github/lock@v2.0.1
      id: unlock
      with:
          mode: "unlock"
#     - name: Print lock status
#       run: |
#           echo "Lock status: ${{ steps.lock.outputs.locked }}"
        
  job1:
    needs: lock
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v2
     - name: build
       run: echo "hi"
       
  job2:
     needs: lock
     runs-on: ubuntu-latest
     steps:
     - uses: actions/checkout@v2
     - name: build
       run: echo "hi"
       
  unlock:
    runs-on: ubuntu-latest
    steps:
      # Unlock
      - uses: github/lock@v2.0.1
        id: lock
        with:
          mode: "unlock"
   
      
      
      
      
